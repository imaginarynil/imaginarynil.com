<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Posts - imaginarynil</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="./post-list.style.css">
</head>

<body class="page">
    <header class="app-bar"></header>
    <main class="main page__main">
        <div class="main__layout">
            <h1 class="heading-1 main__title">Posts</h1>
            <div class="post-list"></div>
        </div>
    </main>
    <script src="/block/appBar.js"></script>
    <script>
        addAppBar()
        function createPostItemEl(createdDate, title, excerpt, url) {
            const postItemEl = document.createElement("a")
            postItemEl.href = url
            postItemEl.classList.add("post-item")
            const createdDateEl = document.createElement("div")
            postItemEl.appendChild(createdDateEl)
            createdDateEl.classList.add("post-item__created-date")
            createdDateEl.appendChild(
                document.createTextNode(createdDate)
            )
            const divEl = document.createElement("div")
            postItemEl.appendChild(divEl)
            const postItem__titleEl = document.createElement("h2")
            divEl.appendChild(postItem__titleEl)
            postItem__titleEl.classList.add("heading-2", "post-item__title")
            postItem__titleEl.appendChild(
                document.createTextNode(title)
            )
            const postItem__excerptEl = document.createElement("p")
            divEl.appendChild(postItem__excerptEl)
            postItem__excerptEl.classList.add("post-item__excerpt")
            postItem__excerptEl.appendChild(
                document.createTextNode(excerpt)
            )
            return postItemEl
        }
        fetch("/data/post.json")
            .then(res => res.json())
            .then(res => {
                const postListEl = document.querySelector(".post-list")
                const posts = Object.entries(res)
                if (posts.length === 0) {
                    postListEl.appendChild(
                        document.createTextNode("No posts were found")
                    )
                    return
                }
                for (const [key, val] of posts) {
                    postListEl.appendChild(
                        createPostItemEl(
                            val.createdDate,
                            val.title,
                            val.excerpt,
                            val.url,
                        )
                    )
                }
            })
    </script>
</body>

</html>